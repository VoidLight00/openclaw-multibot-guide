<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>자동 설정 템플릿 - OpenClaw 멀티봇 가이드</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <a href="../index.html" class="sidebar-logo">[CLAW] OpenClaw <span>Guide</span></a>
      <nav>
        <ul class="sidebar-nav"><li><a href="../index.html">시작하기</a></li></ul>
        <div class="sidebar-section">가이드</div>
        <ul class="sidebar-nav">
          <li><a href="intro.html">1. 개요</a></li>
          <li><a href="setup.html">2. 사전 준비</a></li>
          <li><a href="models.html">3. AI 모델 설정</a></li>
          <li><a href="workspace.html">4. Workspace 구조</a></li>
          <li><a href="config.html">5. Config 설정</a></li>
          <li><a href="run.html">6. 실행 & 테스트</a></li>
        </ul>
        <div class="sidebar-section">실전</div>
        <ul class="sidebar-nav">
          <li><a href="examples.html">활용 예시</a></li>
          <li><a href="auto-setup.html" class="active">자동 설정 템플릿</a></li>
          <li><a href="troubleshooting.html">트러블슈팅</a></li>
        </ul>
      </nav>
    </aside>

    <main class="main">
      <h1>[BOT] 자동 설정 템플릿</h1>
      <p class="lead">
        OpenClaw 에이전트에게 읽혀서 멀티봇을 한 번에 설정하는 템플릿입니다.
        복사 → 수정 → 에이전트에게 전달하면 끝!
      </p>

      <div class="alert alert-info">
        <div class="alert-title">[i] 작동 원리</div>
        <p>이 템플릿은 에이전트가 이해할 수 있는 형식으로 작성되었습니다. 
        에이전트가 YAML 설정을 읽고 자동으로 workspace 생성, config 업데이트, gateway 재시작까지 수행합니다.</p>
      </div>

      <h2>[1] 빠른 시작</h2>

      <div class="steps">
        <div class="step">
          <h4>1단계: 템플릿 복사</h4>
          <p>아래 템플릿을 복사합니다.</p>
        </div>
        
        <div class="step">
          <h4>2단계: 설정 수정</h4>
          <p>에이전트 정보(이름, 토큰, 모델)를 수정합니다.</p>
        </div>
        
        <div class="step">
          <h4>3단계: 에이전트에게 전달</h4>
          <p>기존 OpenClaw 에이전트에게 "이거 실행해줘"라고 전달합니다.</p>
        </div>
      </div>

      <h2>[2] 템플릿</h2>

      <div class="code-header">
        <span>멀티봇 설정 템플릿 (복사해서 사용)</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># OpenClaw 멀티봇 자동 설정
# 아래 설정을 수정한 후 에이전트에게 전달하세요.

# === 사용자 정보 ===
user_name: "사용자이름"
user_timezone: "Asia/Seoul"

# === 에이전트 목록 ===
agents:
  - id: "agent1"
    name: "첫번째 에이전트"
    workspace: "~/.openclaw/workspace-agent1"
    telegram_token: "1234567890:ABCdefGHI..."
    model: "anthropic/claude-sonnet-4"
    personality: "친절하고 전문적인"
    
  - id: "agent2"
    name: "두번째 에이전트"
    workspace: "~/.openclaw/workspace-agent2"
    telegram_token: "0987654321:JKLmnoPQR..."
    model: "google/gemini-2.0-flash"
    personality: "유머러스하고 캐주얼한"

# === 작업 지시 ===
# 위 설정대로 멀티봇 환경을 구성해줘.
# 
# 수행할 작업:
# 1. 각 에이전트의 workspace 폴더 생성
# 2. 기본 파일 생성 (AGENTS.md, SOUL.md, USER.md, IDENTITY.md, TOOLS.md, MEMORY.md)
# 3. ~/.openclaw/openclaw.json 업데이트 (agents.list[] 형식 사용!)
# 4. Gateway 재시작
# 5. 설정 결과 보고</code></pre>

      <h2>[3] 상세 템플릿</h2>

      <p>더 세밀한 설정이 필요하면 전체 템플릿을 사용하세요:</p>

      <div class="code-header">
        <span>전체 템플릿 파일</span>
      </div>
      <pre><code>~/clawd/openclaw-guide/templates/MULTI-AGENT-SETUP.md</code></pre>

      <p>또는 <a href="../templates/MULTI-AGENT-SETUP.md" target="_blank">여기서 다운로드</a></p>

      <h2>[4] 예시: 3명의 악마 에이전트</h2>

      <div class="code-header">
        <span>실제 사용 예시</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># 3명의 악마 에이전트 설정

user_name: "상현"
user_timezone: "Asia/Seoul"

agents:
  - id: "belphegor"
    name: "벨페고르"
    workspace: "/Users/username/clawd"
    telegram_token: "8463609797:AAH6QX7..."
    model: "anthropic/claude-sonnet-4"
    personality: "나태의 악마, 편하고 직설적"
    
  - id: "mammon"
    name: "마몬"
    workspace: "~/.openclaw/workspace-mammon"
    telegram_token: "8540122872:AAEnv-S9..."
    model: "google/gemini-2.0-flash"
    personality: "탐욕의 악마, 리마인더와 일정 관리"
    
  - id: "asmodeus"
    name: "아스모데우스"
    workspace: "~/.openclaw/workspace-asmodeus"
    telegram_token: "8291828954:AAEk5wR..."
    model: "google/gemini-2.0-flash"
    personality: "색욕의 악마, 코딩과 개발"

# 위 설정대로 멀티봇 환경을 구성해줘.</code></pre>

      <h2>[5] 예시: 업무/개인 분리</h2>

      <div class="code-header">
        <span>업무/개인 에이전트 분리</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># 업무/개인 에이전트 분리 설정

user_name: "사용자"
user_timezone: "Asia/Seoul"

agents:
  - id: "work"
    name: "업무 어시스턴트"
    workspace: "~/.openclaw/workspace-work"
    telegram_token: "토큰1"
    model: "anthropic/claude-sonnet-4"
    personality: "전문적이고 정확한, 업무에 집중"
    
  - id: "personal"
    name: "개인 비서"
    workspace: "~/.openclaw/workspace-personal"
    telegram_token: "토큰2"
    model: "google/gemini-2.0-flash"
    personality: "친근하고 재미있는, 일상 대화"

# 위 설정대로 멀티봇 환경을 구성해줘.</code></pre>

      <h2>[!] 주의사항</h2>

      <div class="alert alert-warning">
        <div class="alert-title">[!] 중요 체크리스트</div>
        <ul>
          <li><strong>텔레그램 봇 먼저 생성</strong>: BotFather에서 봇을 만들고 토큰을 받아야 함</li>
          <li><strong>토큰 형식 확인</strong>: <code>숫자:문자열</code> 형식 (예: <code>123456:ABC...</code>)</li>
          <li><strong>모델 API 키</strong>: Anthropic/Google API 키가 설정되어 있어야 함</li>
          <li><strong>기존 config 백업</strong>: 에이전트가 config를 덮어쓸 수 있으니 백업 권장</li>
        </ul>
      </div>

      <h2>[OK] 생성되는 파일 구조</h2>

      <div class="code-header">
        <span>자동 생성되는 구조</span>
      </div>
      <pre><code>~/.openclaw/
├── openclaw.json          # 업데이트됨
├── workspace-agent1/
│   ├── AGENTS.md
│   ├── SOUL.md
│   ├── USER.md
│   ├── IDENTITY.md
│   ├── TOOLS.md
│   └── MEMORY.md
└── workspace-agent2/
    ├── AGENTS.md
    ├── SOUL.md
    ├── USER.md
    ├── IDENTITY.md
    ├── TOOLS.md
    └── MEMORY.md</code></pre>

      <h2>[ADD] 기존 환경에 봇 추가하기</h2>

      <p>이미 멀티봇이 돌아가고 있는데 새 봇을 추가하고 싶을 때:</p>

      <div class="code-header">
        <span>봇 추가 템플릿</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># === 추가할 에이전트 ===
new_agent:
  id: "newbot"
  name: "새 에이전트"
  workspace: "~/.openclaw/workspace-newbot"
  telegram_token: "BotFather에서 받은 토큰"
  model: "google/gemini-2.0-flash"
  personality: "원하는 성격 설명"

# === 작업 지시 ===
# 기존 멀티봇 환경에 위 에이전트를 추가해줘.
#
# 수행할 작업:
# 1. 새 workspace 폴더 생성
# 2. 기본 파일 생성 (AGENTS.md, SOUL.md 등)
# 3. 기존 ~/.openclaw/openclaw.json에 새 에이전트 추가 (기존 설정 유지!)
# 4. Gateway 재시작
# 5. 결과 보고</code></pre>

      <div class="alert alert-danger">
        <div class="alert-title">[!!] 메모리 손실 주의</div>
        <p><strong>봇 추가 시 기존 봇의 메모리가 날아갈 수 있습니다!</strong></p>
        <p>원인: Config 수정 중 기존 에이전트의 workspace 경로가 변경되면 메모리 파일을 찾을 수 없게 됨</p>
      </div>

      <div class="alert alert-warning">
        <div class="alert-title">[!] 추가 시 필수 체크리스트</div>
        <ul>
          <li><strong>Config 백업 필수</strong>: 수정 전 <code>cp ~/.openclaw/openclaw.json ~/.openclaw/openclaw.json.bak</code></li>
          <li><strong>기존 workspace 경로 확인</strong>: 기존 에이전트들의 경로가 바뀌지 않았는지 확인</li>
          <li><strong>ID 중복 확인</strong>: 기존 에이전트와 같은 ID 사용 금지</li>
          <li><strong>토큰 필수</strong>: BotFather에서 새 봇 먼저 생성</li>
        </ul>
      </div>

      <h3>안전한 봇 추가 절차</h3>

      <div class="steps">
        <div class="step">
          <h4>1단계: 현재 Config 백업</h4>
          <div class="code-header">
            <span>Terminal</span>
            <button class="copy-btn" onclick="copyCode(this)">복사</button>
          </div>
          <pre><code>cp ~/.openclaw/openclaw.json ~/.openclaw/openclaw.json.bak
cat ~/.openclaw/openclaw.json | grep -A5 '"list"'  # 기존 경로 확인</code></pre>
        </div>

        <div class="step">
          <h4>2단계: 기존 에이전트 경로 메모</h4>
          <p>반드시 기존 에이전트들의 workspace 경로를 기록해두세요:</p>
          <div class="code-header">
            <span>예시</span>
          </div>
          <pre><code>agent1: /Users/username/clawd          (절대경로)
agent2: ~/.openclaw/workspace-agent2    (틸드경로)</code></pre>
        </div>

        <div class="step">
          <h4>3단계: 에이전트에게 명시적 지시</h4>
          <p>템플릿에 기존 에이전트 정보를 포함시켜서 덮어쓰기 방지:</p>
          <div class="code-header">
            <span>안전한 추가 템플릿</span>
            <button class="copy-btn" onclick="copyCode(this)">복사</button>
          </div>
          <pre><code># === 기존 에이전트 (절대 수정 금지!) ===
existing_agents:
  - id: "agent1"
    workspace: "/Users/username/clawd"  # 이 경로 유지!
  - id: "agent2"
    workspace: "~/.openclaw/workspace-agent2"  # 이 경로 유지!

# === 새로 추가할 에이전트 ===
new_agent:
  id: "agent3"
  name: "새 에이전트"
  workspace: "~/.openclaw/workspace-agent3"
  telegram_token: "토큰"
  model: "google/gemini-2.0-flash"

# 기존 에이전트의 workspace 경로를 절대 변경하지 말고,
# 새 에이전트만 추가해줘.</code></pre>
        </div>

        <div class="step">
          <h4>4단계: 변경 후 검증</h4>
          <div class="code-header">
            <span>Terminal</span>
            <button class="copy-btn" onclick="copyCode(this)">복사</button>
          </div>
          <pre><code># Config 확인
cat ~/.openclaw/openclaw.json | grep -A10 '"list"'

# 기존 경로가 바뀌었으면 백업에서 복구
cp ~/.openclaw/openclaw.json.bak ~/.openclaw/openclaw.json</code></pre>
        </div>
      </div>

      <h3>메모리 손실 시 복구 방법</h3>

      <div class="alert alert-info">
        <div class="alert-title">[i] Workspace 폴더는 보통 그대로 있음</div>
        <p>Config의 경로만 바뀐 거라면, 실제 파일은 원래 위치에 있습니다. 경로만 다시 맞춰주면 복구됩니다.</p>
      </div>

      <div class="code-header">
        <span>복구 절차</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># 1. 원래 workspace 폴더 확인
ls -la /Users/username/clawd/  # 파일 있는지 확인
ls -la ~/.openclaw/workspace-*/  # 다른 workspace들

# 2. Config에서 잘못된 경로 찾기
cat ~/.openclaw/openclaw.json | grep workspace

# 3. 올바른 경로로 수정 (직접 편집 또는 에이전트에게 요청)
# "belphegor의 workspace를 /Users/username/clawd로 수정해줘"

# 4. Gateway 재시작
openclaw gateway restart</code></pre>

      <h3>Config 변경 예시</h3>

      <div class="code-header">
        <span>기존 config</span>
      </div>
      <pre><code>{
  "agents": {
    "list": [
      { "id": "agent1", "workspace": "..." },
      { "id": "agent2", "workspace": "..." }
    ]
  }
}</code></pre>

      <div class="code-header">
        <span>추가 후 config</span>
      </div>
      <pre><code>{
  "agents": {
    "list": [
      { "id": "agent1", "workspace": "..." },
      { "id": "agent2", "workspace": "..." },
      { "id": "newbot", "workspace": "~/.openclaw/workspace-newbot" }
    ]
  }
}</code></pre>

      <h2>[REMOVE] 봇 제거하기</h2>

      <p>에이전트를 제거하고 싶을 때:</p>

      <div class="code-header">
        <span>봇 제거 템플릿</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># === 제거할 에이전트 ===
remove_agent_id: "botid"
delete_workspace: false  # true면 폴더도 삭제

# === 작업 지시 ===
# 위 ID의 에이전트를 멀티봇 환경에서 제거해줘.
#
# 수행할 작업:
# 1. ~/.openclaw/openclaw.json에서 해당 에이전트 제거
#    - agents.list[]에서 제거
#    - channels.telegram.accounts에서 제거
#    - bindings에서 제거
# 2. Gateway 재시작
# 3. delete_workspace가 true면 폴더 삭제 (아니면 보존)</code></pre>

      <div class="alert alert-info">
        <div class="alert-title">[i] Workspace 폴더 보존</div>
        <p>기본적으로 workspace 폴더는 <strong>삭제하지 않습니다</strong> (대화 기록/메모리 보존). 
        완전 삭제를 원하면 <code>delete_workspace: true</code>로 명시하세요.</p>
      </div>

      <h2>[CHANGE] 모델/설정 변경하기</h2>

      <p>기존 에이전트의 모델이나 설정을 변경하고 싶을 때:</p>

      <div class="code-header">
        <span>설정 변경 템플릿</span>
        <button class="copy-btn" onclick="copyCode(this)">복사</button>
      </div>
      <pre><code># === 변경할 에이전트 ===
update_agent:
  id: "agent1"  # 기존 에이전트 ID
  model: "anthropic/claude-opus-4"  # 새 모델 (선택)
  personality: "새로운 성격 설명"  # 새 성격 (선택)

# === 작업 지시 ===
# 위 에이전트의 설정을 변경해줘.
#
# 수행할 작업:
# 1. model 변경 시: ~/.openclaw/openclaw.json의 models.profiles 업데이트
# 2. personality 변경 시: workspace의 SOUL.md 업데이트
# 3. Gateway 재시작</code></pre>

      <div class="page-nav">
        <a href="examples.html">
          <span class="page-nav-label">이전</span>
          <span class="page-nav-title">[LEFT] 활용 예시</span>
        </a>
        <a href="troubleshooting.html" class="page-nav-next">
          <span class="page-nav-label">다음</span>
          <span class="page-nav-title">트러블슈팅 [RIGHT]</span>
        </a>
      </div>
    </main>
  </div>
  <script src="../js/main.js"></script>
</body>
</html>
